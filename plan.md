# Claude Code Visual Builder - 상세 기획서

> Google Opal 스타일의 노드 기반 Claude Code 멀티에이전트 빌더
> 비개발자도 쉽게 Claude Code의 강력한 기능을 활용할 수 있는 시각적 도구

---

## 1. 프로젝트 개요

### 1.1 핵심 미션
- Google Opal이 Gemini를 시각화했듯이, **Claude Code의 멀티에이전트 기능**을 노드 기반 UI로 제공
- 터미널 없이도 Subagent, Skill, MCP를 조합해 복잡한 워크플로우 구축
- **로컬호스트에서 실행** (Vercel 배포 불필요, DB 불필요)

### 1.2 타겟 사용자
- 비개발자 크리에이터 (콘텐츠 자동화)
- 비즈니스 사용자 (리서치, 보고서 생성)
- Claude Code 입문자 (멀티에이전트 개념 학습)

---

## 2. 화면 구성

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📁 Projects   ⚡ My Workflows   🔍 Gallery                    💾 Save  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  상단 노드 팔레트                                                   │  │
│  │  [📥 Input] [🤖 Subagent] [⚡ Skill] [🔌 MCP] [📤 Output]         │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌────────────────────────────────┐  ┌────────────────────────────┐   │
│  │                                │  │  [Preview] [Console] [Step] │   │
│  │      노드 캔버스                 │  ├────────────────────────────┤   │
│  │                                │  │                            │   │
│  │   ┌────┐      ┌────────┐      │  │  우측 패널                   │   │
│  │   │입력 ├─────►│리서치   │      │  │                            │   │
│  │   └────┘      │에이전트 │      │  │  • Preview 탭: 실행 & 결과  │   │
│  │               └────┬───┘      │  │  • Console 탭: 로그 & 에러  │   │
│  │                    │          │  │  • Step 탭: 노드 설정       │   │
│  │          ┌─────────┼─────┐    │  │                            │   │
│  │          ▼         ▼     ▼    │  │                            │   │
│  │     ┌────────┐ ┌─────┐ ┌───┐ │  │                            │   │
│  │     │정리    │ │이미지│ │동영│ │  │                            │   │
│  │     │에이전트│ │생성  │ │상 │ │  │                            │   │
│  │     └────┬───┘ └──┬──┘ └─┬─┘ │  │                            │   │
│  │          │        │      │    │  │                            │   │
│  │          └────────┼──────┘    │  │                            │   │
│  │                   ▼           │  │                            │   │
│  │              ┌────────┐       │  │                            │   │
│  │              │Report  │       │  │                            │   │
│  │              │Output  │       │  │                            │   │
│  │              └────────┘       │  │                            │   │
│  │                                │  │                            │   │
│  └────────────────────────────────┘  └────────────────────────────┘   │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │  💬 "신한은행 글로벌 전략 리서치 보고서를 작성해줘"          🎤 ▶ │  │
│  └──────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 노드 타입 정의

### 3.1 📥 Input Node (노란색)
```yaml
역할: 사용자 입력 수집
입력타입:
  - text: 텍스트 입력
  - file: 파일 업로드 (PDF, 이미지, 문서)
  - select: 드롭다운 선택
  - multi: 복합 입력
연결: 출력 핸들만 있음 (오른쪽)
```

### 3.2 🤖 Subagent Node (보라색)
```yaml
역할: 전문화된 AI 에이전트 실행
설정항목:
  - name: 에이전트 이름
  - role: 역할 (researcher, writer, analyst 등)
  - tools: 허용 도구 [Read, Write, Bash, WebSearch 등]
  - systemPrompt: 시스템 프롬프트
연결: 
  - 입력 핸들 (왼쪽) - 여러 노드로부터 입력 받기 가능
  - 출력 핸들 (오른쪽) - 여러 노드로 출력 전달 가능
특징:
  - 서브에이전트끼리 연결 가능 (병렬/순차 실행)
  - .md 파일 정의 미리보기
  - AI로 .md 파일 자동 생성 가능
```

**Subagent .md 템플릿 (Claude Code 공식 형식):**
```markdown
---
name: research-agent
description: 주어진 주제에 대해 깊이 있는 리서치를 수행합니다.
tools: Read, WebSearch, WebFetch
---

# Research Agent

**역할**: 리서치 전문가

**전문 분야**:
- 시장 조사
- 경쟁사 분석
- 트렌드 분석

## 지침

1. 신뢰할 수 있는 출처만 사용
2. 데이터는 최신 정보 우선
3. 결과는 구조화된 형태로 정리
```

### 3.3 ⚡ Skill Node (시안색)
```yaml
역할: 재사용 가능한 전문 지식 적용
소스:
  - 공식 스킬: Anthropic 공식 스킬 카탈로그에서 선택
  - 커스텀 스킬: AI로 새로 생성
공식스킬목록:
  Document:
    - docx: Word 문서 생성/편집
    - pptx: PowerPoint 프레젠테이션
    - xlsx: Excel 스프레드시트
    - pdf: PDF 생성/폼 작성
  Creative:
    - algorithmic-art: p5.js 생성 예술
    - brand-guidelines: 브랜드 가이드라인 적용
    - canvas-design: 시각 디자인
  Development:
    - mcp-server-generator: MCP 서버 생성
    - web-app-testing: 웹 앱 테스트
  Enterprise:
    - communications: 비즈니스 커뮤니케이션
연결: 입력/출력 핸들 모두
```

**Skill .md 템플릿:**
```markdown
---
name: report-generator
description: 전문적인 보고서를 생성합니다.
---

# Report Generator Skill

## 개요
주어진 데이터를 바탕으로 전문적인 형식의 보고서를 생성합니다.

## 사용법
1. 데이터 입력 받기
2. 템플릿 선택
3. 보고서 생성

## 출력 형식
- Markdown (.md)
- Word Document (.docx)
- PDF (.pdf)
```

### 3.4 🔌 MCP Node (핑크색)
```yaml
역할: 외부 도구/서비스 연결
카테고리:
  데이터소스: PostgreSQL, Notion, Google Drive, Airtable
  개발도구: GitHub, Jira, Sentry, Linear
  통신: Slack, Gmail, Discord
  자동화: n8n, Make, Zapier
연결: 입력/출력 핸들 모두
```

### 3.5 📤 Output Node (초록색)
```yaml
역할: 최종 결과물 표시/저장
출력타입:
  - markdown: .md 파일로 표시
  - document: .docx, .pptx, .pdf 등 (적절한 앱으로 열기)
  - image: 이미지 미리보기
  - webpage: HTML 렌더링
  - link: 외부 링크 (새 탭 열기)
자동판단: 
  - 파일 확장자에 따라 적절한 애플리케이션으로 전환
  - 예: .docx → Word, .pdf → PDF 뷰어, .html → 브라우저
연결: 입력 핸들만 (왼쪽)
```

---

## 4. 노드 간 연결 인터페이스

### 4.1 연결 방식
```yaml
드래그앤드롭:
  - 노드의 출력 핸들(●)에서 드래그 시작
  - 다른 노드의 입력 핸들로 드래그하면 연결선 생성
  - 연결선은 점선 애니메이션으로 데이터 흐름 표시

다중연결:
  - 하나의 출력에서 여러 입력으로 연결 가능 (분기)
  - 여러 출력에서 하나의 입력으로 연결 가능 (합류)
  - 서브에이전트끼리 자유롭게 연결 가능

연결선 스타일:
  - 기본: 회색 점선 (대기 상태)
  - 실행중: 파란색 애니메이션 (데이터 이동)
  - 완료: 초록색 실선
  - 에러: 빨간색 실선
```

### 4.2 연결 규칙
```yaml
허용:
  - Input → Subagent/Skill/MCP → Output
  - Subagent → Subagent (병렬/순차)
  - Skill → Skill
  - MCP → Subagent/Skill

금지:
  - Output → 어떤 노드 (Output은 종착점)
  - 순환 연결 (A → B → A)
```

---

## 5. 우측 패널 구성

### 5.1 Preview 탭 (실행 & 결과)

```
┌─────────────────────────────────────┐
│  Preview                    ▶ Start │
├─────────────────────────────────────┤
│                                     │
│  📝 입력                            │
│  ┌─────────────────────────────┐   │
│  │ 신한은행 글로벌 전략 리서치     │   │
│  │ 보고서를 작성해줘             │   │
│  └─────────────────────────────┘   │
│                                     │
│  [▶ 실행하기]                       │
│                                     │
├─────────────────────────────────────┤
│  실행 중...                         │
│                                     │
│  ┌─ 리서치 에이전트 ───────────┐   │
│  │ ████████████░░░░░░ 67%     │   │
│  │ 글로벌 시장 데이터 수집 중...  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ✅ 입력 처리 완료                  │
│  🔄 리서치 에이전트 (진행중)        │
│  ⏳ 정리 에이전트 (대기)            │
│  ⏳ 이미지 에이전트 (대기)          │
│  ⏳ Report Output (대기)            │
│                                     │
├─────────────────────────────────────┤
│  📊 결과 (완료 시 표시)             │
│                                     │
│  # 신한은행 글로벌 전략 보고서      │
│                                     │
│  ## 1. 시장 개요                    │
│  ...                                │
│                                     │
│  [📥 .md 다운로드] [📄 .docx 변환]  │
└─────────────────────────────────────┘
```

**결과물 형식 자동 판단:**
- `.md` → 마크다운 렌더링 + 다운로드
- `.docx` → Word로 열기 버튼
- `.pptx` → PowerPoint로 열기 버튼
- `.pdf` → PDF 뷰어로 열기
- `.png/.jpg` → 이미지 미리보기
- `.html` → 브라우저에서 열기
- `URL` → 새 탭에서 열기

### 5.2 Console 탭 (로그 & 에러)

```
┌─────────────────────────────────────┐
│  Console                    🗑 Clear │
├─────────────────────────────────────┤
│                                     │
│  [14:32:15] ℹ️ 워크플로우 시작      │
│  [14:32:15] ✅ 입력 노드 처리 완료   │
│                                     │
│  [14:32:16] 🤖 리서치 에이전트 시작  │
│  [14:32:16] → WebSearch 도구 호출   │
│  [14:32:18] → 3개 결과 수신         │
│  [14:32:20] → WebFetch 도구 호출    │
│                                     │
│  [14:32:25] ⚠️ 경고: Rate limit     │
│             approaching             │
│                                     │
│  [14:32:30] ❌ 에러 발생:           │
│  ┌─────────────────────────────┐   │
│  │ Error: Connection timeout   │   │
│  │ at fetchData (agent.js:45)  │   │
│  │                             │   │
│  │ 💡 해결방법:                 │   │
│  │ 네트워크 연결을 확인하거나   │   │
│  │ 잠시 후 다시 시도하세요.     │   │
│  └─────────────────────────────┘   │
│                                     │
│  [14:32:35] 🔄 재시도 중... (1/3)   │
│  [14:32:40] ✅ 리서치 에이전트 완료  │
│                                     │
└─────────────────────────────────────┘
```

**에러 핸들링:**
- 에러 발생 시 해당 노드 빨간색 하이라이트
- 에러 메시지 + 스택 트레이스 표시
- 가능한 경우 해결 방법 제안
- 재시도 옵션 제공

### 5.3 Step 탭 (노드 설정)

노드 선택 시 해당 노드의 상세 설정 표시

**Subagent 선택 시:**
```
┌─────────────────────────────────────┐
│  Step: 리서치 에이전트       🗑 삭제 │
├─────────────────────────────────────┤
│                                     │
│  이름                               │
│  ┌─────────────────────────────┐   │
│  │ 리서치 에이전트              │   │
│  └─────────────────────────────┘   │
│                                     │
│  역할                               │
│  [researcher ▼]                    │
│                                     │
│  도구 권한                          │
│  ☑ Read   ☑ WebSearch             │
│  ☐ Write  ☑ WebFetch              │
│  ☐ Bash   ☐ Edit                  │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  📄 .md 정의 미리보기               │
│  ┌─────────────────────────────┐   │
│  │ ---                         │   │
│  │ name: research-agent        │   │
│  │ description: 리서치 전문가   │   │
│  │ tools: Read, WebSearch      │   │
│  │ ---                         │   │
│  │                             │   │
│  │ # Research Agent            │   │
│  │ ...                         │   │
│  └─────────────────────────────┘   │
│                                     │
│  [✏️ 직접 편집] [🤖 AI로 생성]      │
│                                     │
├─────────────────────────────────────┤
│  🤖 AI로 .md 생성                   │
│  ┌─────────────────────────────┐   │
│  │ 글로벌 시장 리서치를 전문으로 │   │
│  │ 하는 에이전트를 만들어줘     │   │
│  └─────────────────────────────┘   │
│  [생성하기]                         │
└─────────────────────────────────────┘
```

**Skill 선택 시:**
```
┌─────────────────────────────────────┐
│  Step: Report Generator      🗑 삭제 │
├─────────────────────────────────────┤
│                                     │
│  스킬 선택                          │
│  ┌─────────────────────────────┐   │
│  │ 🔍 스킬 검색...              │   │
│  └─────────────────────────────┘   │
│                                     │
│  📦 공식 스킬                       │
│  ├─ Document                       │
│  │  ├─ docx (Word)                │
│  │  ├─ pptx (PowerPoint)          │
│  │  ├─ xlsx (Excel)               │
│  │  └─ pdf (PDF)                  │
│  ├─ Creative                       │
│  │  ├─ algorithmic-art            │
│  │  └─ canvas-design              │
│  └─ Development                    │
│     └─ mcp-server-generator       │
│                                     │
│  [+ 새 스킬 생성]                   │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  📄 스킬 정의 미리보기              │
│  (위 스킬 선택 시 .md 내용 표시)    │
│                                     │
└─────────────────────────────────────┘
```

---

## 6. 실행 흐름

### 6.1 실행 순서 결정
```
1. 토폴로지 정렬로 노드 실행 순서 결정
2. Input 노드부터 시작
3. 의존성이 해결된 노드부터 실행
4. 병렬 실행 가능한 노드는 동시 실행
5. 모든 입력이 완료된 노드만 실행
6. Output 노드에서 종료
```

### 6.2 실행 상태 표시
```yaml
노드 상태:
  pending: 회색 테두리 (대기)
  running: 파란색 테두리 + 펄스 애니메이션
  completed: 초록색 테두리 + 체크마크
  error: 빨간색 테두리 + 경고 아이콘

프로그레스:
  - 각 노드별 진행률 표시 (0-100%)
  - 전체 워크플로우 진행률 표시
  - 예상 남은 시간 표시 (가능한 경우)
```

---

## 7. 저장 및 불러오기

### 7.1 로컬 저장 (localStorage)
```json
{
  "workflowName": "신한은행 리서치 보고서",
  "nodes": [
    {
      "id": "node_1",
      "type": "input",
      "position": { "x": 100, "y": 200 },
      "data": {
        "label": "입력",
        "inputType": "text"
      }
    },
    {
      "id": "node_2",
      "type": "subagent",
      "position": { "x": 350, "y": 150 },
      "data": {
        "label": "리서치 에이전트",
        "role": "researcher",
        "tools": ["Read", "WebSearch"],
        "mdContent": "..."
      }
    }
  ],
  "edges": [
    {
      "id": "edge_1",
      "source": "node_1",
      "target": "node_2"
    }
  ],
  "savedAt": "2026-01-24T14:30:00Z"
}
```

### 7.2 JSON 내보내기/가져오기
- 워크플로우를 .json 파일로 저장
- .json 파일 드래그앤드롭으로 불러오기
- 공유 가능한 형태

---

## 8. 기술 스택

```yaml
프론트엔드:
  - React + TypeScript
  - React Flow (노드 캔버스)
  - Zustand (상태 관리)
  - Tailwind CSS (스타일링)
  - React Markdown (마크다운 렌더링)

빌드:
  - Vite (개발 서버 & 빌드)

실행환경:
  - 로컬호스트 (npm run dev)
  - 브라우저에서 직접 실행

데이터저장:
  - localStorage (DB 불필요)
  - JSON 파일 내보내기/가져오기
```

---

## 9. MVP 범위 (1차)

### 포함
- [ ] 노드 캔버스 (드래그앤드롭, 연결)
- [ ] 5가지 노드 타입 (Input, Subagent, Skill, MCP, Output)
- [ ] 노드 간 자유로운 연결
- [ ] 우측 패널 (Preview, Console, Step 3개 탭)
- [ ] Subagent/Skill .md 미리보기 및 AI 생성
- [ ] 공식 스킬 카탈로그 (10개)
- [ ] 실행 시뮬레이션 (프로그레스 표시)
- [ ] 결과 .md 파일 렌더링
- [ ] 콘솔 로그 및 에러 표시
- [ ] localStorage 저장/불러오기

### 제외 (추후)
- [ ] 실제 Claude Code CLI 연동
- [ ] 사용자 인증
- [ ] 클라우드 저장
- [ ] 워크플로우 공유/퍼블리시
- [ ] 갤러리

---

## 10. 참고 자료

### Google Opal
- 공식 문서: https://developers.google.com/opal
- 개요: https://developers.google.com/opal/overview

### Claude Code
- Subagents: https://code.claude.com/docs/en/sub-agents
- Skills: https://code.claude.com/docs/en/skills
- MCP: https://code.claude.com/docs/en/mcp

### 공식 스킬 저장소
- GitHub: https://github.com/anthropics/skills/tree/main/skills

### 커뮤니티 서브에이전트
- VoltAgent: https://github.com/VoltAgent/awesome-claude-code-subagents